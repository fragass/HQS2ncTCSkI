<!DOCTYPE html>
<html lang="pt-BR">
<head>
      <link rel="icon" href="favicon.png" type="image/png">
    <script>
  // Proteção: exige login em todo acesso
  if (sessionStorage.getItem("auth") !== "true") {
 window.location.href = "index.html";
  }
</script>
  <meta charset="UTF-8">
  <title>Workday</title>
      <style>
  /* Estilo do mini perfil */
  #mini-profile {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
    font-family: Arial, sans-serif;
    font-size: 14px;
    padding: 6px 10px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    z-index: 1000;
    cursor: pointer;
  }

  #mini-profile span {
    font-weight: bold;
    color: #ffcc00;
  }

  /* Dropdown container */
  .dropdown {
    position: relative;
    display: inline-block;
  }

  .dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background-color: rgba(0,0,0,0.9);
    min-width: 80px;
    box-shadow: 0px 2px 5px rgba(0,0,0,0.3);
    border-radius: 6px;
    z-index: 1001;
  }

  .dropdown-content a {
    color: red;
    padding: 8px 12px;
    text-decoration: none;
    display: block;
    font-size: 14px;
    border-radius: 4px;
  }

  .dropdown-content a:hover {
    background-color: rgba(255,0,0,0.2);
  }

  /* Mostrar dropdown ao passar o mouse */
  .dropdown:hover .dropdown-content {
    display: block;
  }
</style>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div id="mainWrapper">
    <div class="game-area">
      
      <!-- Painel lateral ESQUERDO -->
      <div class="side-panel left-panel">
        <div class="card">
          <h3>COMANDOS</h3>
          <ul>
            <li><span class="key">←</span> Mover esquerda</li>
            <li><span class="key">→</span> Mover direita</li>
            <li><span class="key">↓</span> Soft drop</li>
            <li><span class="key">↑</span> Rotacionar</li>
            <li><span class="key">Espaço</span> Hard drop</li>
            <li><span class="key">C</span> Hold</li>
            <li><span class="key">P</span> Pausar</li>
            <li><span class="key">R</span> Reiniciar</li>
          </ul>
        </div>
      </div>

      <!-- Arena + scoreboard abaixo -->
      <div class="arena-wrapper">
        <canvas id="tetris" width="200" height="400"></canvas>
        <div id="scoreboard">Score: 0 | Linhas: 0 | Level: 1</div>
      </div>

      <!-- Painel lateral DIREITO -->
      <div class="side-panel right-panel">
 <div id="mini-profile" class="dropdown">
    Logado como: <span id="user-phone"></span>
    <div class="dropdown-content">
      <a href="#" id="logout">Sair</a>
    </div>
  </div>
        <div class="next-box">
          <h2>Próximas Peças</h2>
          <div class="next-box-canvases">
            <canvas id="next1" width="100" height="100"></canvas>
            <canvas id="next2" width="100" height="100"></canvas>
            <canvas id="next3" width="100" height="100"></canvas>
          </div>
        </div>
        <div class="controls-side">
          <button id="startPauseBtn" class="btn start">Iniciar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay -->
  <div id="overlayPopup">
    <h2 id="overlayTitle">TETRIS</h2>
    <p id="overlayInfo"></p>
    <button id="overlayBtn" class="btn">Iniciar</button>
  </div>

  <!-- Som opcional -->
  <audio id="lineClearSound" src="lineclear.mp3" preload="auto"></audio>

<script>
  // pega o telefone do usuário logado
  const phone = sessionStorage.getItem("loggedUserPhone");
  if (phone) {
    document.getElementById("user-phone").textContent = phone;
  }

  // proteção extra: redireciona se não estiver logado
  if (sessionStorage.getItem("auth") !== "true") {
    window.location.href = "index.html";
  }
          // logout: limpa sessão e volta para login
    document.getElementById("logout").addEventListener("click", (e) => {
      e.preventDefault();
      sessionStorage.clear(); // remove auth e telefone
      window.location.href = "index.html"; // redireciona para login
    });
</script>
      
  <script src="js/script.js"></script>
</body>
</html>








